"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[558],{58490:(e,t,r)=>{function n(e,t){return e&&t?`${t} (${e})`:t||e}r.d(t,{Z:()=>n})},19824:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(73788);const s=function(e){const t=e.activeConnection;let r,s=!1;return e.isConnected&&t?r=e.isOutOfDate?(0,n.Z)("Needs Update"):t.relay?(0,n.Z)("Indirect"):t.isPrivate?(0,n.Z)("Nearby"):(0,n.Z)("Remote"):e.isRelayed?r=(0,n.Z)("Indirect"):e.isUnavailable?r=(0,n.Z)("Unavailable"):e.isUnauthorized?r=(0,n.Z)("Unauthorized"):(s=!0,r=(0,n.Z)("Connecting")),{isConnecting:s,status:r}}},92558:(e,t,r)=>{r.r(t),r.d(t,{default:()=>pt});var n=r(67294),s=r(41821),i=r(92450),o=r(28216),a=r(22222),c=r(87242),l=r(97075);const p=(0,c.Z)((0,a.P1)(l.Z,(e=>e.reduce(((e,t)=>{const{entityID:r,machineIdentifier:n}=t;return r&&n&&e.push({entityID:r,machineIdentifier:n}),e}),[]))),(e=>e));function u(e){return e.user.experienceSettings.homeSettings.preferredServerID}var d=r(92656),m=r(77054),f=r(87442),v=r(8067),h=r(42985),S=r(63776),P=r(86022),y=r(46898),b=r(78110),E=r(77353),I=r(74278),x=r(9922),g=r(17939),N=r(235);const O=(0,g.Z)(N.Z,(({homeSettings:e})=>e)),Z=(0,a.P1)(O,(e=>e.servers),x.Z,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}));var C=r(97946),j=r(78741),B=r(73788),k=r(70668),w=r(70852),T=r(14580),R=r(60952),F=Object.defineProperty,D=Object.defineProperties,U=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))_.call(t,r)&&M(e,r,t[r]);if(A)for(var r of A(t))H.call(t,r)&&M(e,r,t[r]);return e},W=(e,t)=>D(e,U(t));class $ extends n.Component{constructor(e,t){super(e,t),this.onChange=e=>{const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),n=z({},t);r.forEach((t=>{const r=n[t];n[t]=W(z({},r),{value:e})})),this.store.dispatch(k.Nw.replaceState(n))},this.onFormStoreChange=()=>{const{names:e}=this.props;if(!e.length)return;const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),[n]=r,s=t[n].value,i=function(e,t,r){return e.every((e=>{const n=r[e];return!n||n.value===t}))}(r,s,t);this.setState({value:i?s:null})},this.store=this.context.formStore,this.state={value:!0}}UNSAFE_componentWillMount(){this.unsubscribe=this.store.subscribe(this.onFormStoreChange)}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){const e=this.props,{names:t,onChange:r}=e,s=((e,t)=>{var r={};for(var n in e)_.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&A)for(var n of A(e))t.indexOf(n)<0&&H.call(e,n)&&(r[n]=e[n]);return r})(e,["names","onChange"]);return t.length?n.createElement(w.Z,W(z({},s),{value:this.state.value,onChange:(0,T.Z)(this.onChange,r)})):null}}$.contextTypes={formStore:R.Z};const K=$;function V(e){const{className:t,titleBarClassName:r,titleTextClassName:s,scrollerClassName:i,title:o,rightTitle:a,children:c}=e;return n.createElement("div",{className:t},n.createElement("div",{className:r},n.createElement("span",{className:s},o),a),n.createElement(v.Z,{className:i},c))}V.defaultProps={className:"FirstRunExperienceActionsContainer-container-ny0mbu",titleBarClassName:"FirstRunExperienceActionsContainer-titleBar-VHybrq",titleTextClassName:"FirstRunExperienceActionsContainer-titleText-jyPdKj",scrollerClassName:"FirstRunExperienceActionsContainer-scroller-y2WlYD Scroller-vertical-nKq0Q8"};const X=V;var q=r(65935),G=r(18222),Q=r(85448),Y=r(25555);const J="FirstRunExperienceStep-stepButton-yDEnXT";var L=Object.defineProperty,ee=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,ne=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,se=(e,t)=>{for(var r in t||(t={}))te.call(t,r)&&ne(e,r,t[r]);if(ee)for(var r of ee(t))re.call(t,r)&&ne(e,r,t[r]);return e},ie=(e,t)=>{var r={};for(var n in e)te.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ee)for(var n of ee(e))t.indexOf(n)<0&&re.call(e,n)&&(r[n]=e[n]);return r};function oe(e){const{step:t,isActive:r,onPress:s}=e,i=(0,n.useCallback)((()=>{s(t)}),[s,t]);return n.createElement(Q.Z,{className:r?"FirstRunExperienceStep-activeStepIcon-SxIbcv FirstRunExperienceStep-stepIcon-Nw5HXA":"FirstRunExperienceStep-stepIcon-Nw5HXA",onPress:i},t)}function ae(e){const t=e,{className:r,actionsClassName:s,stepContainerClassName:i,steps:o,step:a,stepHeadingText:c,stepBodyText:l,stepButtonBackText:p,stepButtonNextText:u,children:d,component:m,onButtonBackPress:f,onButtonNextPress:v,onStepPress:h}=t,S=ie(t,["className","actionsClassName","stepContainerClassName","steps","step","stepHeadingText","stepBodyText","stepButtonBackText","stepButtonNextText","children","component","onButtonBackPress","onButtonNextPress","onStepPress"]),P=q.Z.prop("X-Plex-Product");return n.createElement(m,se({className:r},S),n.createElement("div",{className:s},d),n.createElement("div",{className:i},n.createElement("div",{className:"FirstRunExperienceStep-stepText-NTZbsm"},(0,B.Z)("{productName} Setup",{productName:P}),Array.from(Array(o),((e,t)=>t+1)).map((e=>n.createElement(oe,{key:e,isActive:a===e,step:e,onPress:h})))),n.createElement("h3",{className:"FirstRunExperienceStep-stepHeading-J6noxn"},c),n.createElement("p",{className:"FirstRunExperienceStep-stepBody-gJiLmC"},l),p?n.createElement(G.Z,{className:J,onPress:f},p):null,n.createElement(G.Z,{className:J,kind:Y._8,type:"submit",onPress:v},u)))}ae.defaultProps={className:"FirstRunExperienceStep-container-CS60ox",actionsClassName:"FirstRunExperienceStep-actions-gY3hXF",stepContainerClassName:"FirstRunExperienceStep-stepContainer-wQawUg",component:function(e){var t=e,{children:r}=t,s=ie(t,["children"]);return n.createElement("div",se({},s),r)},steps:2,step:1};const ce=ae;var le=r(58851),pe=r(77483);var ue=Object.defineProperty,de=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,ve=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const he=(0,le.Z)((function(e){const t=e,{title:r,sourceType:s,providerIdentifier:i}=t,o=((e,t)=>{var r={};for(var n in e)me.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&de)for(var n of de(e))t.indexOf(n)<0&&fe.call(e,n)&&(r[n]=e[n]);return r})(t,["title","sourceType","providerIdentifier"]);return n.createElement("label",{className:"SelectSourceItemInput-sourceItem-ZECmgr",htmlFor:o.name},n.createElement("span",{className:"SelectSourceItemInput-sourceTitle-lbHYK9"},n.createElement("span",{className:"SelectSourceItemInput-sourceIconContainer-hvrz7k"},n.createElement(pe.Z,{providerIdentifier:i,sourceType:s})),r),n.createElement(w.Z,((e,t)=>{for(var r in t||(t={}))me.call(t,r)&&ve(e,r,t[r]);if(de)for(var r of de(t))fe.call(t,r)&&ve(e,r,t[r]);return e})({inputClassName:"SelectSourceItemInput-input-luiKcA CheckInput-input-dUDRsF"},o)))})),Se=function(e){const{isPending:t,steps:r,sources:s,onSubmit:i,onButtonBackPress:o,onStepPress:a}=e;return t?n.createElement(h.Z,null):n.createElement(ce,{component:k.ZP,step:2,stepBodyText:(0,B.Z)("Choose what you’d like to have in your sidebar navigation menu. (You’ll always have easy access to everything, so you can make changes and further customize your menu later.)"),stepButtonBackText:r>1?(0,B.Z)("Go Back"):void 0,stepButtonNextText:(0,B.Z)("Finish Setup"),stepHeadingText:(0,B.Z)("Customize your Media"),steps:r,onButtonBackPress:o,onStepPress:a,onSubmit:i},n.createElement(X,{rightTitle:s.length?n.createElement(K,{inputClassName:"SelectNavigationStep-input-HAIipV CheckInput-input-dUDRsF",name:"allSources",names:s.map((e=>e.key))}):null,title:(0,B.Z)("Pinned Sources")},s.map((e=>n.createElement(he,{key:e.key,initialValue:!0,name:e.key,providerIdentifier:e.providerIdentifier,sourceType:e.sourceType,title:e.title})))))};var Pe=Object.defineProperty,ye=Object.defineProperties,be=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,ge=(e,t,r)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ne=(0,a.P1)(Z,y.Z,((e,t)=>(e?e.providers:[]).map((e=>t[e])))),Oe=(0,a.P1)(E.Z,(e=>e.filter((e=>!/.*(staging|dev)$/.test(e.identifier)))));function Ze(e,t,r){return t.reduce(((t,n)=>{const s=(0,j.Z)(n),i=(0,C.Z)({sourceServer:e,sourceProvider:n,directories:s&&s.directories,hasHybridGuide:r});return t.push(...i),t}),[])}const Ce={dispatchSetupSources:m.E8};class je extends n.Component{constructor(){super(...arguments),this.onSubmit=e=>{const t=this.props.sources.filter((({key:t})=>e[t]));this.props.dispatchSetupSources({sources:t})}}componentDidUpdate(){this.props.hasCompletedSetup&&this.props.onEndFirstRunExperience(),this.props.isPending||0!==this.props.sources.length||this.props.dispatchSetupSources({sources:[]})}render(){const e=this.props,{isPending:t,sources:r,onEndFirstRunExperience:s,dispatchSetupSources:i}=e,o=((e,t)=>{var r={};for(var n in e)Ie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ee)for(var n of Ee(e))t.indexOf(n)<0&&xe.call(e,n)&&(r[n]=e[n]);return r})(e,["isPending","sources","onEndFirstRunExperience","dispatchSetupSources"]);return n.createElement(Se,(a=((e,t)=>{for(var r in t||(t={}))Ie.call(t,r)&&ge(e,r,t[r]);if(Ee)for(var r of Ee(t))xe.call(t,r)&&ge(e,r,t[r]);return e})({isPending:t||0===r.length,sources:r},o),c={onSubmit:this.onSubmit},ye(a,be(c))));var a,c}}const Be=(0,o.$j)((function(){return(0,a.P1)(Z,Ne,I.Z,Oe,N.Z,b.Z,((e,t,r,n,s,i)=>{const o=Ze(e,t,i),a=Ze(r,n,i),{sidebarSettings:{hasCompletedSetup:c}}=s;return{isPending:!(!e||e.connectionTestResult!==P._r.PENDING),sources:[...o,...a],hasCompletedSetup:c}}))}),Ce)(je);var ke=r(45697),we=r.n(ke),Te=r(99735),Re=r(87880),Fe=r(94184),De=r.n(Fe),Ue=r(9709),Ae=r(58490),_e=r(19824),He=r(77713),Me=r(14522);var ze=Object.defineProperty,We=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,qe=(e,t,r)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ge=(0,o.$j)((function(){return(0,Te.Z)((0,Re.Z)(),["activeConnection","friendlyName","sourceTitle","isConnected","isOutOfDate","isRelayed","isSecure","isShared","isUnavailable"])}),(function(e,t){return{onPress(){t.onPress({entityID:t.serverEntityID,machineIdentifier:t.machineIdentifier})}}}))((function(e){const{isSelected:t,isUnavailable:r,onPress:s}=e,i=(0,Ae.Z)((0,Ue.Z)(e),(0,_e.Z)(e).status);return n.createElement(Q.Z,{className:De()("SelectPreferredServerItem-serverButton-VmKM_j",t&&"SelectPreferredServerItem-isSelected-aZkc14",r&&"SelectPreferredServerItem-isUnavailable-govWpw"),onPress:s},n.createElement("span",{className:"SelectPreferredServerItem-titles-AsWJhf"},n.createElement("span",{className:"SelectPreferredServerItem-title-IPFLVg"},(0,He.Z)(e)),n.createElement("span",{className:"SelectPreferredServerItem-details-QN4Qet"},i)),t?n.createElement(Me.Z,{"aria-label":(0,B.Z)("Selected"),className:"SelectPreferredServerItem-serverMenuIcon-mbWPsv"}):null)}));Ge.propTypes=We(((e,t)=>{for(var r in t||(t={}))Ve.call(t,r)&&qe(e,r,t[r]);if(Ke)for(var r of Ke(t))Xe.call(t,r)&&qe(e,r,t[r]);return e})({},Ge.propTypes),$e({machineIdentifier:we().string.isRequired,serverEntityID:we().string.isRequired}));const Qe=Ge,Ye=function(e){const{preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s,onButtonNextPress:i,onStepPress:o}=e;return n.createElement(ce,{step:1,stepBodyText:(0,B.Z)("It looks like you have access to more than one Plex Media Server. Choose your preferred server, and we’ll use it to build your home screen."),stepButtonNextText:(0,B.Z)("Continue"),stepHeadingText:(0,B.Z)("Choose your Preferred Server"),onButtonNextPress:i,onStepPress:o},n.createElement(X,{title:(0,B.Z)("Plex Media Servers")},r.map((e=>n.createElement(Qe,{key:e.entityID,isSelected:t&&t.machineIdentifier===e.machineIdentifier,machineIdentifier:e.machineIdentifier,serverEntityID:e.entityID,onPress:s})))))};var Je=Object.defineProperty,Le=Object.defineProperties,et=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,st=(e,t,r)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function it(e,t){return!e&&t.length>0}class ot extends n.Component{constructor(e,t){super(e,t),this.onNextStepPress=()=>{this.setState((e=>({step:Math.max(2,e.step+1)})))},this.onBackStepPress=()=>{this.setState((e=>({step:Math.min(1,e.step-1)})))},this.onStepPress=e=>{this.setState({step:e})},this.onEndFirstRunExperience=()=>{const{preferredServerIdentifiers:e,onEndFirstRunExperience:t}=this.props;t(e?{preferredServerEntityID:e.entityID,preferredServerInteraction:e.machineIdentifier!==this.state.initialDefaultPreferredServerIdentifier}:{})},this.state={step:1}}componentDidMount(){(0,f.c9)((()=>{this.props.onResetCustomization()})),this._maybeCallOnSavePreferredServer(((e,t)=>Le(e,et({preferredServerIdentifiers:null})))(((e,t)=>{for(var r in t||(t={}))rt.call(t,r)&&st(e,r,t[r]);if(tt)for(var r of tt(t))nt.call(t,r)&&st(e,r,t[r]);return e})({},this.props)))}componentDidUpdate(){this._maybeCallOnSavePreferredServer(this.props)}_maybeCallOnSavePreferredServer(e){const{isPending:t,preferredServerIdentifiers:r,serverIdentifiers:n,onSavePreferredServer:s}=e;if(t)return;const i=function(e,t){return e?e.machineIdentifier:t.length>0?t[0].machineIdentifier:void 0}(r,n);!this.state.initialDefaultPreferredServerIdentifier&&i&&this.setState({initialDefaultPreferredServerIdentifier:i}),it(r,n)&&s({machineIdentifier:i})}render(){const{isPending:e,preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s}=this.props,{step:i}=this.state,o=r.length<2;return e||it(t,r)?n.createElement(S.Z,null,n.createElement(h.Z,null)):n.createElement(v.Z,{className:"FirstRunExperiencePage-container-dTL3Ek"},1!==i||o?n.createElement(Be,{steps:o?0:2,onButtonBackPress:this.onBackStepPress,onEndFirstRunExperience:this.onEndFirstRunExperience,onStepPress:this.onStepPress}):n.createElement(Ye,{preferredServerIdentifiers:t,serverIdentifiers:r,onButtonNextPress:this.onNextStepPress,onSavePreferredServer:s,onStepPress:this.onStepPress}))}}const at=ot,ct={onSavePreferredServer:m.p7,onEndFirstRunExperience:m.G_,onResetCustomization:m.Dy},lt=(0,o.$j)((function(){return(0,a.P1)(d.Z,u,p,((e,t,r)=>({isPending:!e,preferredServerIdentifiers:t?r.find((e=>e.machineIdentifier===t)):void 0,serverIdentifiers:r})))}),ct)(at);function pt(){return n.createElement("div",{className:s.u},n.createElement(i.Z,null,n.createElement(lt,null)))}}}]);