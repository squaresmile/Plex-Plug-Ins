"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[498],{47752:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(22222),s=r(9922),i=r(17939),l=r(235);const a=(0,i.Z)(l.Z,(({homeSettings:e})=>e)),o=(0,n.P1)(a,(e=>e.servers),s.Z,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}))},69139:(e,t,r)=>{r.d(t,{Z:()=>R});var n=r(67294),s=r(28216),i=r(22222),l=r(84503),a=r(235),o=r(87442),c=r(36795),u=(r(32903),r(73788)),p=r(87264),m=r(85448),y=r(10125),d=r(28201),h=r(8059),S=r(90425),f=r(4913),b=r(61133),v=r(66188),P=r(95844),g=r(84332);class E extends n.Component{constructor(){super(...arguments),this.onListStylePress=e=>{this.props.onListStylePress(this.props.listStyle)}}render(){const{isSelected:e,title:t}=this.props;return n.createElement(g.Z,{isSelected:e,onPress:this.onListStylePress},t)}}const O=E;class j extends n.Component{constructor(e,t){super(e,t),this.onSliderChange=({steppedValue:e})=>{this.setState({sliderValue:e}),this._clearTimeout(),this._columnAdjustmentTimeoutID=window.setTimeout((()=>{this.props.onColumnAdjustmentChange(-1*e)}),this.props.columnAdjustmentTimeout)},this.onStylesPress=e=>{this.setState({isStylesMenuOpen:!this.state.isStylesMenuOpen})},this.onStylesMenuClose=()=>{this.setState({isStylesMenuOpen:!1})},this.onListStylePress=e=>{this.props.onListStyleChange(e),this.onStylesMenuClose()},this.state={sliderValue:-1*e.columnAdjustment,isStylesMenuOpen:!1},this._stylesButtonID=(0,d.Z)()}UNSAFE_componentWillReceiveProps(e){e.columnAdjustment!==this.props.columnAdjustment&&this.setState({sliderValue:-1*e.columnAdjustment})}componentWillUnmount(){this._clearTimeout()}_clearTimeout(){this._columnAdjustmentTimeoutID&&window.clearTimeout(this._columnAdjustmentTimeoutID)}render(){const{listType:e,listContext:t,selectedListStyle:r,allListStyles:s}=this.props,{sliderValue:i,isStylesMenuOpen:l}=this.state,{POSTER:a,MOSAIC:o,TABLE:c,SUMMARY:d,SIMPLE_SUMMARY:g}=f,E=[{listStyle:a,title:(0,u.Z)("Grid View")},{listStyle:o,title:(0,u.Z)("Mosaic View")},{listStyle:c,title:(0,u.Z)("List View")},{listStyle:d,title:(0,u.Z)("Summary View")},{listStyle:g,title:(0,u.Z)("Summary View")}],j=f.showListStylesSlider(r),I=f.showListStylesMenu(s),Z=(w=r)===f.TABLE?b.Z:w===f.SUMMARY||w===f.SIMPLE_SUMMARY?v.Z:P.Z;var w;return j||I?n.createElement("div",{className:"MetadataListStylesMenu-stylesContainer-NSquJl"},j?n.createElement(S.Z,{className:"MetadataListStylesMenu-slider-wDp31p Slider-slider-YdLxcK",label:(0,u.Z)("Poster Size"),max:2,min:-1,stepSize:1,value:i,onChange:this.onSliderChange}):null,n.createElement(m.Z,{"aria-label":(0,u.Z)("Show List Styles"),className:I?"MetadataListStylesMenu-stylesButtonWithArrow-qgXemN MetadataListStylesMenu-stylesButton-vVfcDS":"MetadataListStylesMenu-stylesButton-vVfcDS","data-testid":"toolbarView",id:this._stylesButtonID,isDisabled:!I,onPress:this.onStylesPress},n.createElement(Z,{className:"MetadataListStylesMenu-stylesIcon-Y_eUpl"}),I?n.createElement(p.Z,{direction:l?h.UP:h.WV}):null),I?n.createElement(y.Z,{isOpen:l,target:this._stylesButtonID,onMenuClose:this.onStylesMenuClose},E.map((({listStyle:e,title:t})=>s.indexOf(e)>-1&&n.createElement(O,{key:e,isSelected:r===e,listStyle:e,title:t,onListStylePress:this.onListStylePress})))):null):null}}j.defaultProps={selectedListStyle:f.POSTER,allListStyles:[f.POSTER],allListStyleActions:[],columnAdjustmentTimeout:500};const I=j;var Z=Object.defineProperty,w=Object.defineProperties,C=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t)=>{for(var r in t||(t={}))T.call(t,r)&&A(e,r,t[r]);if(D)for(var r of D(t))M.call(t,r)&&A(e,r,t[r]);return e},N=(e,t)=>w(e,C(t));const x=(0,i.P1)(a.Z,(e=>({columnAdjustment:e.columnAdjustment,listStyles:e.listStyles})));class _ extends n.Component{constructor(){super(...arguments),this.onColumnAdjustmentChange=e=>{(0,o.c9)((()=>{this.props.saveExperienceSettings({columnAdjustment:e})}))},this.onListStyleChange=e=>{const{listStyles:t,listType:r,listSubtype:n,listContext:s}=this.props,i=(0,c.Z)(r,n),l=N(L({},t),{[s]:N(L({},t[s]||{}),{[i]:e})});(0,o.c9)((()=>{this.props.saveExperienceSettings({listStyles:l})}))}}render(){return n.createElement(I,N(L({},this.props),{onColumnAdjustmentChange:this.onColumnAdjustmentChange,onListStyleChange:this.onListStyleChange}))}}const R=(0,s.$j)((e=>x),{saveExperienceSettings:l.LN})(_)},76498:(e,t,r)=>{r.r(t),r.d(t,{default:()=>st});var n=r(67294),s=r(28216),i=r(22222),l=r(47752),a=r(42985),o=r(63776);const c=function(e){const{children:t,isPending:r}=e;return r?n.createElement(o.Z,null,n.createElement(a.Z,null)):n.createElement(n.Fragment,null,t)};var u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,S=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const f=(0,i.P1)((e=>e.isWaitingForServers),l.Z,((e,t)=>({preferredServerEntityID:t&&t.entityID,isWaitingForServers:e}))),b=(0,s.$j)(f)((function(e){const t=e,{isWaitingForServers:r,preferredServerEntityID:s}=t,i=((e,t)=>{var r={};for(var n in e)d.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&y)for(var n of y(e))t.indexOf(n)<0&&h.call(e,n)&&(r[n]=e[n]);return r})(t,["isWaitingForServers","preferredServerEntityID"]),l=(0,n.useRef)(r);return l.current&&!r&&(l.current=r),n.createElement(c,(a=((e,t)=>{for(var r in t||(t={}))d.call(t,r)&&S(e,r,t[r]);if(y)for(var r of y(t))h.call(t,r)&&S(e,r,t[r]);return e})({},i),o={isPending:!s&&l.current},p(a,m(o))));var a,o}));var v=r(13469),P=r.n(v),g=r(44757),E=r(62291),O=r(37920),j=r(72310),I=r(97257),Z=r(17939),w=r(48521),C=r(235),D=r(87442),T=r(73788),M=r(30471),A=r(62365),L=r(17633),N=r(69281),x=r(15859),_=r(86555),R=r(64520);const U=(0,s.$j)((function(){return(0,i.P1)((0,_.Z)(),((e={})=>({containerKey:e.skipParent?e.grandparentKey:e.parentKey})))}))(R.Z);var W=r(17950),q=r(57635),V=r(94184),k=r.n(V),H=r(51026),z=r(47435),$=r(56572),B=r(14523),F=r(16219);const Y=function(e){const{className:t,serverEntityID:r,providerEntityID:s,searchResultEntityID:i,imageWidth:l,imageHeight:a,imageUrl:o,tag:c,tagType:u,librarySectionType:p,titleComponents:m}=e,y=(0,z.Z)(e),d=H.Z.get(u),h=!!d&&d.isPerson;return n.createElement("div",{className:t,style:y.style},n.createElement("div",{className:"SearchTagPosterCell-imageContainer-HuAhPo"},n.createElement(B.Z,{imageHeight:a,imageUrl:o,imageWidth:l,librarySectionType:p,providerEntityID:s,serverEntityID:r,tag:c,tagType:u,title:c}),n.createElement(F.Z,{className:k()("SearchTagPosterCell-imageLink-yTzS8o",h&&"SearchTagPosterCell-isPerson-dpL5Uu"),providerEntityID:s,searchResultEntityID:i,serverEntityID:r})),n.createElement("div",{className:"SearchTagPosterCell-titleContainer-dz6mdo"},m.map(((e,t)=>n.createElement($.Z,{key:t,component:e,isSecondary:t>0,providerEntityID:s,searchResultEntityID:i,serverEntityID:r})))))};var K=Object.defineProperty,J=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,Q=(e,t,r)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ee=(0,s.$j)((function(){return(0,i.P1)(((e,{listType:t})=>t),((e,{listContext:t})=>t),((e,{cellWidth:t})=>t),(0,W.Z)(),((e,t,r,n={})=>{const s=n.tagItem,{tag:i,tagType:l,librarySectionType:a}=s,o=(0,q.Z)(r,null,e,s,t);return{tag:i,tagType:l,librarySectionType:a,imageWidth:o.width,imageHeight:o.height,imageUrl:o.url}}))}))((function(e){return n.createElement(Y,((e,t)=>{for(var r in t||(t={}))X.call(t,r)&&Q(e,r,t[r]);if(J)for(var r of J(t))G.call(t,r)&&Q(e,r,t[r]);return e})({},e))}));var te=Object.defineProperty,re=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,ae=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oe=(e,t)=>{for(var r in t||(t={}))ie.call(t,r)&&ae(e,r,t[r]);if(se)for(var r of se(t))le.call(t,r)&&ae(e,r,t[r]);return e};const ce=function(e){var t,r=e,{isMetadataItem:s}=r,i=((e,t)=>{var r={};for(var n in e)ie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&se)for(var n of se(e))t.indexOf(n)<0&&le.call(e,n)&&(r[n]=e[n]);return r})(r,["isMetadataItem"]);return s?n.createElement(U,(t=oe({},i),re(t,ne({showSelect:!1})))):n.createElement(ee,oe({},i))};var ue=Object.defineProperty,pe=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const he=(0,s.$j)((function(){return(0,i.P1)((0,W.Z)(),(({metadataItem:e})=>({metadataItemEntityID:e,isMetadataItem:!!e})))}))((function(e){var t=e,{component:r}=t,s=((e,t)=>{var r={};for(var n in e)me.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&pe)for(var n of pe(e))t.indexOf(n)<0&&ye.call(e,n)&&(r[n]=e[n]);return r})(t,["component"]);return n.createElement(r,((e,t)=>{for(var r in t||(t={}))me.call(t,r)&&de(e,r,t[r]);if(pe)for(var r of pe(t))ye.call(t,r)&&de(e,r,t[r]);return e})({},s))}));var Se=r(168),fe=r(3437);var be=Object.defineProperty,ve=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,je=(e,t,r)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ie=(e,t)=>{for(var r in t||(t={}))Ee.call(t,r)&&je(e,r,t[r]);if(ge)for(var r of ge(t))Oe.call(t,r)&&je(e,r,t[r]);return e};const Ze=function(e){const{title:t,sourceTitle:r,hubs:s,columnAdjustment:i,isSearchPending:l,isSearchPopulated:c}=e,u=r?`${t} - ${r}`:t;return n.createElement("div",null,n.createElement("div",{"aria-level":"2",className:"SearchProviderHubs-providerTitle-pTs8rI",role:"heading"},u,l?n.createElement(a.Z,{className:"SearchProviderHubs-spinner-LCtfAZ",size:N.HC}):null),!s.length&&c?n.createElement(o.Z,{description:(0,T.Z)("Try a different query"),title:(0,T.Z)("No Results")}):s.map((e=>{const t=e.type,r=L.mo,s=(0,fe.Z)(t,r,{subtype:e.subtype,isSearch:!0,isSearchAll:!0});return n.createElement(x.Z,(l=Ie({},e),a={key:e.hubIdentifier,cellRenderer:(o={listType:t,listContext:r,titleComponents:s},e=>n.createElement(he,Ie(Ie({component:ce},o),e))),items:e.results,itemsOffset:0,keyPropName:"searchResultEntityID",layout:(0,Se.Z)(t,r,i,s.length),listContext:r,listType:t,size:e.results.length},ve(l,Pe(a))));var l,a,o})))};var we=Object.defineProperty,Ce=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Me=(e,t,r)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ae=function(e){const{isSearchCapable:t,providers:r,columnAdjustment:s}=e;return t?n.createElement(M.Z,{innerClassName:"SearchPageContent-content-yuOMi4 PageContent-innerPageContent-m6ARXd"},r.map((e=>n.createElement(Ze,((e,t)=>{for(var r in t||(t={}))De.call(t,r)&&Me(e,r,t[r]);if(Ce)for(var r of Ce(t))Te.call(t,r)&&Me(e,r,t[r]);return e})({key:e.providerEntityID,columnAdjustment:s},e))))):n.createElement(A.Z,{description:(0,T.Z)("Browse libraries using the sidebar"),title:(0,T.Z)("This server does not support search")})};var Le=Object.defineProperty,Ne=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,Re=(e,t,r)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Ue(){return(0,Z.Z)((0,i.P1)(w.Z,(e=>e.reduce(((e,{server:t,provider:r})=>t&&r&&t.isConnected?(e[r.entityID]={serverEntityID:t.entityID,identifier:r.identifier,title:r.title,sourceTitle:r.sourceTitle},e):e),{}))),(e=>e))}const We={fetchSearchPage:g.ES,clearSearchPage:g.Nu};class qe extends n.Component{UNSAFE_componentWillMount(){(0,D.c9)((()=>{this._clear(),this._populate()}))}UNSAFE_componentWillReceiveProps(e){const t=e.query!==this.props.query,r=e.availableProviders!==this.props.availableProviders;(t||r)&&(0,D.c9)((()=>{t&&this._clear(e),this._populate(e)}))}_clear(e=this.props){e.clearSearchPage()}_populate(e=this.props){e.fetchSearchPage({availableProviders:e.availableProviders,query:e.query,limit:30})}render(){return n.createElement(Ae,((e,t)=>{for(var r in t||(t={}))xe.call(t,r)&&Re(e,r,t[r]);if(Ne)for(var r of Ne(t))_e.call(t,r)&&Re(e,r,t[r]);return e})({},this.props))}}const Ve=(0,s.$j)((function(){return(0,i.P1)(Ue(),(0,i.P1)((e=>e.ui.searchPage.searches),Ue(),((e,t)=>{const r=e.reduce(((e,r)=>{const n=r.providerEntityID,s=t[n];if(!s)return e;let i=e[s.identifier];return i||(i=e[s.identifier]={providerEntityID:n,title:s.title,sourceTitle:s.sourceTitle,isSearchPending:!1,isSearchPopulated:!1,hubs:{}}),r.isSearchPending&&(i.isSearchPending=!0),r.isSearchPopulated&&(i.isSearchPopulated=!0),r.hubs.forEach((e=>{const t=e=>({serverEntityID:s.serverEntityID,providerEntityID:n,searchResultEntityID:e}),r=e.metadataResults.map(t),l=e.tagResults.map(t),a=i.hubs[e.hubIdentifier];a?(a.size+=e.size,a.results=a.results.concat(r,l)):i.hubs[e.hubIdentifier]={hubIdentifier:e.hubIdentifier,size:e.size,type:e.type,title:e.title,results:[].concat(r,l)}})),e}),{});return P().map(r,(e=>({providerEntityID:e.providerEntityID,title:e.title,sourceTitle:e.sourceTitle,isSearchPending:e.isSearchPending,isSearchPopulated:e.isSearchPopulated,hubs:P().values(e.hubs)})))})),C.Z,((e,t,r)=>({availableProviders:e,isSearchCapable:!!Object.keys(e).length,columnAdjustment:r.columnAdjustment,providers:t})))}),We)(qe);function ke({className:e,children:t}){return n.createElement("div",{className:e},t)}ke.defaultProps={className:"PageHeaderCenter-pageHeaderCenter-mMF86x"};const He=ke;var ze=r(54768),$e=r(90792),Be=r(23574),Fe=r(69139);const Ye=function(e){const{isSearchPending:t,query:r}=e;return n.createElement(Be.Z,null,n.createElement(ze.Z,null,(0,T.Z)("Search All Sources")),n.createElement(He,null,n.createElement("span",null,t?(0,T.Z)('Searching for "{query}"',{query:r}):(0,T.Z)('Results for "{query}"',{query:r})),t?n.createElement(a.Z,{className:"SearchPageHeader-spinner-n4JU73",size:N.HC}):null),n.createElement($e.Z,null,n.createElement(Fe.Z,null)))},Ke=function(e){const{isSearchPending:t}=e,{query:r}=(0,j.Z)();return n.createElement(I.Z,{metricsPage:E.fP,scrollDirection:O.Hn},n.createElement(Ye,{isSearchPending:t,query:r}),n.createElement(Ve,{query:r}))};var Je=Object.defineProperty,Xe=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,et=(e,t,r)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const tt={clearSearchPage:g.Nu};class rt extends n.Component{componentWillUnmount(){this.props.clearSearchPage()}render(){return n.createElement(Ke,((e,t)=>{for(var r in t||(t={}))Ge.call(t,r)&&et(e,r,t[r]);if(Xe)for(var r of Xe(t))Qe.call(t,r)&&et(e,r,t[r]);return e})({},this.props))}}const nt=(0,s.$j)((function(){return(0,i.P1)((e=>e.ui.searchPage),(e=>({isSearchPending:!!P().findWhere(e.searches,{isSearchPending:!0})})))}),tt)(rt);function st(){return n.createElement(b,null,n.createElement(nt,null))}},36795:(e,t,r)=>{function n(e,t){return t?`${e}-${t}`:e}r.d(t,{Z:()=>n})}}]);