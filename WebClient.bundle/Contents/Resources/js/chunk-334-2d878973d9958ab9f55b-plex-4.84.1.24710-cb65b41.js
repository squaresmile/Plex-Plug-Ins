"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[334],{47752:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(22222),s=r(9922),i=r(17939),o=r(235);const a=(0,i.Z)(o.Z,(({homeSettings:e})=>e)),c=(0,n.P1)(a,(e=>e.servers),s.Z,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}))},58490:(e,t,r)=>{function n(e,t){return e&&t?`${t} (${e})`:t||e}r.d(t,{Z:()=>n})},19824:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(73788);const s=function(e){const t=e.activeConnection;let r,s=!1;return e.isConnected&&t?r=e.isOutOfDate?(0,n.Z)("Needs Update"):t.relay?(0,n.Z)("Indirect"):t.isPrivate?(0,n.Z)("Nearby"):(0,n.Z)("Remote"):e.isRelayed?r=(0,n.Z)("Indirect"):e.isUnavailable?r=(0,n.Z)("Unavailable"):e.isUnauthorized?r=(0,n.Z)("Unauthorized"):(s=!0,r=(0,n.Z)("Connecting")),{isConnecting:s,status:r}}},38334:(e,t,r)=>{r.r(t),r.d(t,{default:()=>at});var n=r(67294),s=r(10890),i=r(92450),o=r(28216),a=r(22222),c=r(87242),l=r(97075);const p=(0,c.Z)((0,a.P1)(l.Z,(e=>e.reduce(((e,t)=>{const{entityID:r,machineIdentifier:n}=t;return r&&n&&e.push({entityID:r,machineIdentifier:n}),e}),[]))),(e=>e));function u(e){return e.user.experienceSettings.homeSettings.preferredServerID}var d=r(92656),m=r(77054),f=r(87442),v=r(8067),h=r(42985),S=r(63776),P=r(86022),y=r(46898),b=r(78110),E=r(77353),I=r(74278),x=r(47752),g=r(235),N=r(97946),O=r(78741),Z=r(73788),C=r(70668),j=r(70852),B=r(14580),k=r(60952),w=Object.defineProperty,T=Object.defineProperties,R=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,A=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_=(e,t)=>{for(var r in t||(t={}))D.call(t,r)&&A(e,r,t[r]);if(F)for(var r of F(t))U.call(t,r)&&A(e,r,t[r]);return e},H=(e,t)=>T(e,R(t));class M extends n.Component{constructor(e,t){super(e,t),this.onChange=e=>{const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),n=_({},t);r.forEach((t=>{const r=n[t];n[t]=H(_({},r),{value:e})})),this.store.dispatch(C.Nw.replaceState(n))},this.onFormStoreChange=()=>{const{names:e}=this.props;if(!e.length)return;const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),[n]=r,s=t[n].value,i=function(e,t,r){return e.every((e=>{const n=r[e];return!n||n.value===t}))}(r,s,t);this.setState({value:i?s:null})},this.store=this.context.formStore,this.state={value:!0}}UNSAFE_componentWillMount(){this.unsubscribe=this.store.subscribe(this.onFormStoreChange)}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){const e=this.props,{names:t,onChange:r}=e,s=((e,t)=>{var r={};for(var n in e)D.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&F)for(var n of F(e))t.indexOf(n)<0&&U.call(e,n)&&(r[n]=e[n]);return r})(e,["names","onChange"]);return t.length?n.createElement(j.Z,H(_({},s),{value:this.state.value,onChange:(0,B.Z)(this.onChange,r)})):null}}M.contextTypes={formStore:k.Z};const z=M;function W(e){const{className:t,titleBarClassName:r,titleTextClassName:s,scrollerClassName:i,title:o,rightTitle:a,children:c}=e;return n.createElement("div",{className:t},n.createElement("div",{className:r},n.createElement("span",{className:s},o),a),n.createElement(v.Z,{className:i},c))}W.defaultProps={className:"FirstRunExperienceActionsContainer-container-ny0mbu",titleBarClassName:"FirstRunExperienceActionsContainer-titleBar-VHybrq",titleTextClassName:"FirstRunExperienceActionsContainer-titleText-jyPdKj",scrollerClassName:"FirstRunExperienceActionsContainer-scroller-y2WlYD Scroller-vertical-nKq0Q8"};const $=W;var K=r(65935),V=r(18222),X=r(85448),q=r(25555);const G="FirstRunExperienceStep-stepButton-yDEnXT";var Q=Object.defineProperty,Y=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,ee=(e,t,r)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,te=(e,t)=>{for(var r in t||(t={}))J.call(t,r)&&ee(e,r,t[r]);if(Y)for(var r of Y(t))L.call(t,r)&&ee(e,r,t[r]);return e},re=(e,t)=>{var r={};for(var n in e)J.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Y)for(var n of Y(e))t.indexOf(n)<0&&L.call(e,n)&&(r[n]=e[n]);return r};function ne(e){const{step:t,isActive:r,onPress:s}=e,i=(0,n.useCallback)((()=>{s(t)}),[s,t]);return n.createElement(X.Z,{className:r?"FirstRunExperienceStep-activeStepIcon-SxIbcv FirstRunExperienceStep-stepIcon-Nw5HXA":"FirstRunExperienceStep-stepIcon-Nw5HXA",onPress:i},t)}function se(e){const t=e,{className:r,actionsClassName:s,stepContainerClassName:i,steps:o,step:a,stepHeadingText:c,stepBodyText:l,stepButtonBackText:p,stepButtonNextText:u,children:d,component:m,onButtonBackPress:f,onButtonNextPress:v,onStepPress:h}=t,S=re(t,["className","actionsClassName","stepContainerClassName","steps","step","stepHeadingText","stepBodyText","stepButtonBackText","stepButtonNextText","children","component","onButtonBackPress","onButtonNextPress","onStepPress"]),P=K.Z.prop("X-Plex-Product");return n.createElement(m,te({className:r},S),n.createElement("div",{className:s},d),n.createElement("div",{className:i},n.createElement("div",{className:"FirstRunExperienceStep-stepText-NTZbsm"},(0,Z.Z)("{productName} Setup",{productName:P}),Array.from(Array(o),((e,t)=>t+1)).map((e=>n.createElement(ne,{key:e,isActive:a===e,step:e,onPress:h})))),n.createElement("h3",{className:"FirstRunExperienceStep-stepHeading-J6noxn"},c),n.createElement("p",{className:"FirstRunExperienceStep-stepBody-gJiLmC"},l),p?n.createElement(V.Z,{className:G,onPress:f},p):null,n.createElement(V.Z,{className:G,kind:q._8,type:"submit",onPress:v},u)))}se.defaultProps={className:"FirstRunExperienceStep-container-CS60ox",actionsClassName:"FirstRunExperienceStep-actions-gY3hXF",stepContainerClassName:"FirstRunExperienceStep-stepContainer-wQawUg",component:function(e){var t=e,{children:r}=t,s=re(t,["children"]);return n.createElement("div",te({},s),r)},steps:2,step:1};const ie=se;var oe=r(58851),ae=r(77483);var ce=Object.defineProperty,le=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,de=(e,t,r)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const me=(0,oe.Z)((function(e){const t=e,{title:r,sourceType:s,providerIdentifier:i}=t,o=((e,t)=>{var r={};for(var n in e)pe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&le)for(var n of le(e))t.indexOf(n)<0&&ue.call(e,n)&&(r[n]=e[n]);return r})(t,["title","sourceType","providerIdentifier"]);return n.createElement("label",{className:"SelectSourceItemInput-sourceItem-ZECmgr",htmlFor:o.name},n.createElement("span",{className:"SelectSourceItemInput-sourceTitle-lbHYK9"},n.createElement("span",{className:"SelectSourceItemInput-sourceIconContainer-hvrz7k"},n.createElement(ae.Z,{providerIdentifier:i,sourceType:s})),r),n.createElement(j.Z,((e,t)=>{for(var r in t||(t={}))pe.call(t,r)&&de(e,r,t[r]);if(le)for(var r of le(t))ue.call(t,r)&&de(e,r,t[r]);return e})({inputClassName:"SelectSourceItemInput-input-luiKcA CheckInput-input-dUDRsF"},o)))})),fe=function(e){const{isPending:t,steps:r,sources:s,onSubmit:i,onButtonBackPress:o,onStepPress:a}=e;return t?n.createElement(h.Z,null):n.createElement(ie,{component:C.ZP,step:2,stepBodyText:(0,Z.Z)("Choose what you’d like to have in your sidebar navigation menu. (You’ll always have easy access to everything, so you can make changes and further customize your menu later.)"),stepButtonBackText:r>1?(0,Z.Z)("Go Back"):void 0,stepButtonNextText:(0,Z.Z)("Finish Setup"),stepHeadingText:(0,Z.Z)("Customize your Media"),steps:r,onButtonBackPress:o,onStepPress:a,onSubmit:i},n.createElement($,{rightTitle:s.length?n.createElement(z,{inputClassName:"SelectNavigationStep-input-HAIipV CheckInput-input-dUDRsF",name:"allSources",names:s.map((e=>e.key))}):null,title:(0,Z.Z)("Pinned Sources")},s.map((e=>n.createElement(me,{key:e.key,initialValue:!0,name:e.key,providerIdentifier:e.providerIdentifier,sourceType:e.sourceType,title:e.title})))))};var ve=Object.defineProperty,he=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Ee=(e,t,r)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ie=(0,a.P1)(x.Z,y.Z,((e,t)=>(e?e.providers:[]).map((e=>t[e])))),xe=(0,a.P1)(E.Z,(e=>e.filter((e=>!/.*(staging|dev)$/.test(e.identifier)))));function ge(e,t,r){return t.reduce(((t,n)=>{const s=(0,O.Z)(n),i=(0,N.Z)({sourceServer:e,sourceProvider:n,directories:s&&s.directories,hasHybridGuide:r});return t.push(...i),t}),[])}const Ne={dispatchSetupSources:m.E8};class Oe extends n.Component{constructor(){super(...arguments),this.onSubmit=e=>{const t=this.props.sources.filter((({key:t})=>e[t]));this.props.dispatchSetupSources({sources:t})}}componentDidUpdate(){this.props.hasCompletedSetup&&this.props.onEndFirstRunExperience(),this.props.isPending||0!==this.props.sources.length||this.props.dispatchSetupSources({sources:[]})}render(){const e=this.props,{isPending:t,sources:r,onEndFirstRunExperience:s,dispatchSetupSources:i}=e,o=((e,t)=>{var r={};for(var n in e)ye.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Pe)for(var n of Pe(e))t.indexOf(n)<0&&be.call(e,n)&&(r[n]=e[n]);return r})(e,["isPending","sources","onEndFirstRunExperience","dispatchSetupSources"]);return n.createElement(fe,(a=((e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&Ee(e,r,t[r]);if(Pe)for(var r of Pe(t))be.call(t,r)&&Ee(e,r,t[r]);return e})({isPending:t||0===r.length,sources:r},o),c={onSubmit:this.onSubmit},he(a,Se(c))));var a,c}}const Ze=(0,o.$j)((function(){return(0,a.P1)(x.Z,Ie,I.Z,xe,g.Z,b.Z,((e,t,r,n,s,i)=>{const o=ge(e,t,i),a=ge(r,n,i),{sidebarSettings:{hasCompletedSetup:c}}=s;return{isPending:!(!e||e.connectionTestResult!==P._r.PENDING),sources:[...o,...a],hasCompletedSetup:c}}))}),Ne)(Oe);var Ce=r(45697),je=r.n(Ce),Be=r(99735),ke=r(87880),we=r(94184),Te=r.n(we),Re=r(9709),Fe=r(58490),De=r(19824),Ue=r(77713),Ae=r(14522);var _e=Object.defineProperty,He=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,ze=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,Ke=(e,t,r)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ve=(0,o.$j)((function(){return(0,Be.Z)((0,ke.Z)(),["activeConnection","friendlyName","sourceTitle","isConnected","isOutOfDate","isRelayed","isSecure","isShared","isUnavailable"])}),(function(e,t){return{onPress(){t.onPress({entityID:t.serverEntityID,machineIdentifier:t.machineIdentifier})}}}))((function(e){const{isSelected:t,isUnavailable:r,onPress:s}=e,i=(0,Fe.Z)((0,Re.Z)(e),(0,De.Z)(e).status);return n.createElement(X.Z,{className:Te()("SelectPreferredServerItem-serverButton-VmKM_j",t&&"SelectPreferredServerItem-isSelected-aZkc14",r&&"SelectPreferredServerItem-isUnavailable-govWpw"),onPress:s},n.createElement("span",{className:"SelectPreferredServerItem-titles-AsWJhf"},n.createElement("span",{className:"SelectPreferredServerItem-title-IPFLVg"},(0,Ue.Z)(e)),n.createElement("span",{className:"SelectPreferredServerItem-details-QN4Qet"},i)),t?n.createElement(Ae.Z,{"aria-label":(0,Z.Z)("Selected"),className:"SelectPreferredServerItem-serverMenuIcon-mbWPsv"}):null)}));Ve.propTypes=He(((e,t)=>{for(var r in t||(t={}))We.call(t,r)&&Ke(e,r,t[r]);if(ze)for(var r of ze(t))$e.call(t,r)&&Ke(e,r,t[r]);return e})({},Ve.propTypes),Me({machineIdentifier:je().string.isRequired,serverEntityID:je().string.isRequired}));const Xe=Ve,qe=function(e){const{preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s,onButtonNextPress:i,onStepPress:o}=e;return n.createElement(ie,{step:1,stepBodyText:(0,Z.Z)("It looks like you have access to more than one Plex Media Server. Choose your preferred server, and we’ll use it to build your home screen."),stepButtonNextText:(0,Z.Z)("Continue"),stepHeadingText:(0,Z.Z)("Choose your Preferred Server"),onButtonNextPress:i,onStepPress:o},n.createElement($,{title:(0,Z.Z)("Plex Media Servers")},r.map((e=>n.createElement(Xe,{key:e.entityID,isSelected:t&&t.machineIdentifier===e.machineIdentifier,machineIdentifier:e.machineIdentifier,serverEntityID:e.entityID,onPress:s})))))};var Ge=Object.defineProperty,Qe=Object.defineProperties,Ye=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,tt=(e,t,r)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function rt(e,t){return!e&&t.length>0}class nt extends n.Component{constructor(e,t){super(e,t),this.onNextStepPress=()=>{this.setState((e=>({step:Math.max(2,e.step+1)})))},this.onBackStepPress=()=>{this.setState((e=>({step:Math.min(1,e.step-1)})))},this.onStepPress=e=>{this.setState({step:e})},this.onEndFirstRunExperience=()=>{const{preferredServerIdentifiers:e,onEndFirstRunExperience:t}=this.props;t(e?{preferredServerEntityID:e.entityID,preferredServerInteraction:e.machineIdentifier!==this.state.initialDefaultPreferredServerIdentifier}:{})},this.state={step:1}}componentDidMount(){(0,f.c9)((()=>{this.props.onResetCustomization()})),this._maybeCallOnSavePreferredServer(((e,t)=>Qe(e,Ye({preferredServerIdentifiers:null})))(((e,t)=>{for(var r in t||(t={}))Le.call(t,r)&&tt(e,r,t[r]);if(Je)for(var r of Je(t))et.call(t,r)&&tt(e,r,t[r]);return e})({},this.props)))}componentDidUpdate(){this._maybeCallOnSavePreferredServer(this.props)}_maybeCallOnSavePreferredServer(e){const{isPending:t,preferredServerIdentifiers:r,serverIdentifiers:n,onSavePreferredServer:s}=e;if(t)return;const i=function(e,t){return e?e.machineIdentifier:t.length>0?t[0].machineIdentifier:void 0}(r,n);!this.state.initialDefaultPreferredServerIdentifier&&i&&this.setState({initialDefaultPreferredServerIdentifier:i}),rt(r,n)&&s({machineIdentifier:i})}render(){const{isPending:e,preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s}=this.props,{step:i}=this.state,o=r.length<2;return e||rt(t,r)?n.createElement(S.Z,null,n.createElement(h.Z,null)):n.createElement(v.Z,{className:"FirstRunExperiencePage-container-dTL3Ek"},1!==i||o?n.createElement(Ze,{steps:o?0:2,onButtonBackPress:this.onBackStepPress,onEndFirstRunExperience:this.onEndFirstRunExperience,onStepPress:this.onStepPress}):n.createElement(qe,{preferredServerIdentifiers:t,serverIdentifiers:r,onButtonNextPress:this.onNextStepPress,onSavePreferredServer:s,onStepPress:this.onStepPress}))}}const st=nt,it={onSavePreferredServer:m.p7,onEndFirstRunExperience:m.G_,onResetCustomization:m.Dy},ot=(0,o.$j)((function(){return(0,a.P1)(d.Z,u,p,((e,t,r)=>({isPending:!e,preferredServerIdentifiers:t?r.find((e=>e.machineIdentifier===t)):void 0,serverIdentifiers:r})))}),it)(st);function at(){return n.createElement("div",{className:s.u},n.createElement(i.Z,null,n.createElement(ot,null)))}}}]);