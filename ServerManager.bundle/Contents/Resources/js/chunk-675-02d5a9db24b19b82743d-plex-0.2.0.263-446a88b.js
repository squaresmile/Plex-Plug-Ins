"use strict";(self.webpackChunkserver_manager=self.webpackChunkserver_manager||[]).push([[675],{70638:(e,t,r)=>{r.r(t),r.d(t,{default:()=>un});var n=r(67294),l=r(22220),a=r(4364),i=r(42263),o=r(74539),c=r(73282),s=r(68225),u=r(80177),m=r(4120),p=r(89703),f=r(45697),d=r.n(f),y=r(28216),v=r(22222),b=r(59634),g=r(66307),h=r(44553),Z=r(66977),O=r(46935),E=r(4495),P=r(36652),I=r(31517),w=r(44738);var k=Object.defineProperty,C=Object.prototype.hasOwnProperty,j=Object.getOwnPropertySymbols,S=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&N(e,r,t[r]);if(j)for(var r of j(t))S.call(t,r)&&N(e,r,t[r]);return e};const T=(0,y.$j)((function(){return(0,v.P1)((0,h.Z)("isProvidersPopulated"),(0,h.Z)("providersError"),(0,b.Z)(),g.Z,((e,t,r,n)=>r?{hasProvider:!0,hasError:!!r.error,isPending:!r.isPopulated}:{hasProvider:!1,isDownForMaintenance:n.isDownForMaintenance,isUnreachable:n.isUnavailable,hasError:!!t,isPending:!e}))}))((function(e){const{children:t,hasProvider:r,isDownForMaintenance:l,isUnreachable:a,hasError:i,isPending:o}=e;return l?n.createElement(O.Z,null):a?n.createElement(w.Z,null):i?n.createElement(I.Z,null):o?n.createElement(E.Z,null,n.createElement(Z.Z,null)):r?n.createElement(n.Fragment,null,t):n.createElement(P.Z,null)}));T.propTypes=x(x({},T.propTypes),{providerEntityID:d().string.isRequired});const A=T;var F=r(69299);const M=function(e){const{children:t,machineIdentifier:r,providerIdentifier:l}=e,a=r===u.X?A:F.Z,i=(0,m.Z)(p.SERVER,r),o=(0,m.Z)(p.PROVIDER,l,i);return n.createElement(a,{providerEntityID:o,serverEntityID:i},t)};var R=r(22618),D=r(88019),H=r(34777),L=r(87023),U=r(71065),V=r(49788);const X=R.Z.extend({name:"PlayHistoryListItemModel",syncedAttrs:{key:D.Z.string,parentKey:D.Z.string,grandparentKey:D.Z.string,title:D.Z.string,parentTitle:D.Z.string,grandparentTitle:D.Z.string,type:D.Z.string,thumb:D.Z.string,parentThumb:D.Z.string,grandparentThumb:D.Z.string,grandparentArt:D.Z.string,index:D.Z.integer,parentIndex:D.Z.integer,originallyAvailableAt:D.Z.string,viewedAt:D.Z.integer,accountID:D.Z.integer,deviceID:D.Z.integer},derivedAttrs:{itemKey(){return this.get("key")},id(){return this.cid}}}),z=V.Z.extend({name:"PlayHistoryListItemCollection",context:["server"],model:X});R.Z.extend({mixins:[H.Z],collectionName:"items",name:"PlayHistoryListModel",context:["server","accountID","filters","sort","limit"],responseType:L.AV,url(){const e=this.filters.reduce(((e,t)=>(e[t.key]=t.value,e)),{});null!=this.accountID&&(e.accountID=this.accountID),null!=this.sort&&(e.sort=this.sort),null!=this.limit&&(e.limit=this.limit);let t=U.Z.join("/status/sessions/history/all",e);return t=t.replace("viewedAt=","viewedAt>="),this.getPaginatedUrl(t)},sessionAttrs:{currentPageStart:D.Z.integer,currentPageSize:D.Z.integer,populatedRange:D.Z.object},syncedAttrs:{totalSize:D.Z.integer},syncedRelations:{items:{relationClass:z,rootPropertyName:"Metadata",setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()}});var K=r(13469),Q=r.n(K),q=r(95180);r(14710);const W="boolean",$="other";var J=Object.defineProperty,Y=Object.prototype.hasOwnProperty,_=Object.getOwnPropertySymbols,B=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ee=(e,t)=>{for(var r in t||(t={}))Y.call(t,r)&&G(e,r,t[r]);if(_)for(var r of _(t))B.call(t,r)&&G(e,r,t[r]);return e};const te="=",re=`([^&!=<>]+)(${[te,"!=","==","!==",">=","<=",">>=","<<=",">>=-","<<=-"].sort(((e,t)=>t.length-e.length)).map(q.Z).join("|")})([^&]+)?`,ne=new RegExp(re,"g"),le=new RegExp(re),ae={unwatched:!0,unwatchedLeaves:!0,unmatched:!0,duplicate:!0,inProgress:!0,hdonly:!0,hdr:!0};var ie=r(63542),oe=r(78869),ce=r(62962),se=r(96653),ue=r(7037),me=r(68623),pe=r(53572);const fe={pageScroller:"IrIm5 sWZ6m"};var de=Object.defineProperty,ye=Object.prototype.hasOwnProperty,ve=Object.getOwnPropertySymbols,be=Object.prototype.propertyIsEnumerable,ge=(e,t,r)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,he=(e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&ge(e,r,t[r]);if(ve)for(var r of ve(t))be.call(t,r)&&ge(e,r,t[r]);return e};function Ze(e){var t=e,{className:r=fe.pageScroller,skipScrollRestore:l=!1,onScrollPositionChange:a}=t,i=((e,t)=>{var r={};for(var n in e)ye.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ve)for(var n of ve(e))t.indexOf(n)<0&&be.call(e,n)&&(r[n]=e[n]);return r})(t,["className","skipScrollRestore","onScrollPositionChange"]);const o=(0,me.Z)({key:"Page",shouldRestoreImmediately:!0,onScrollPositionChange:a}),c=l?{onScrollPositionChange:a}:o.scrollRestoreProps;return n.createElement(pe.Z,null,n.createElement(ue.Z,he(he(he({},i),c),{className:r})))}var Oe=r(69781);function Ee(e,t){return!!e&&e.some((e=>e.key===t))}var Pe=r(21235),Ie=r(53665);var we=r(8515);var ke=r(49584),Ce=r(50958),je=r(87893);const Se=(0,v.P1)(je.Z,(e=>e.timeFormat));var Ne=r(78259),xe=r(8931);const Te={key:"user",title:()=>(0,Pe.Z)("User"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{accountID:l}=t,i=(0,n.useMemo)((()=>((e,t)=>(0,v.P1)((0,we.Z)(e),(e=>e.accounts.find((e=>e.id===t)))))(r.machineIdentifier,l)),[l,r.machineIdentifier]),o=(0,y.v9)(i);return o?n.createElement("span",{className:e,title:o.name},o.name):n.createElement("span",{className:e},(0,Pe.Z)("Unknown User"))},style:{flex:"1 1 250px"}},Ae={key:"type",title:()=>(0,Pe.Z)("Type"),component:function({className:e,playHistoryItem:t}){const{type:r}=t,l=(0,Ce.nW)(r);return l?n.createElement("span",{className:e,title:l.title},l.title):null},style:{flex:"0 1 120px"}},Fe={key:"title",title:()=>(0,Pe.Z)("Title"),component:function({className:e,playHistoryItem:t}){const r=(0,Ie.Z)(t);return n.createElement("span",{className:e},n.createElement("div",{className:"jsZYC"},n.createElement("span",{className:"ksmO4",title:r},r)))},style:{flex:"2 0 350px"}},Me={key:"player",title:()=>(0,Pe.Z)("Player"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{deviceID:l}=t,i=(0,y.v9)((0,ke.Z)(r.machineIdentifier)).devices.find((e=>e.id===l));return i?n.createElement("span",{className:e,title:i.name},i.name):n.createElement("span",{className:e},(0,Pe.Z)("Unknown"))},style:{flex:"1 1 150px"}},Re={key:"platform",title:()=>(0,Pe.Z)("Platform"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c9)(),{deviceID:l}=t,i=(0,y.v9)((0,ke.Z)(r.machineIdentifier)).devices.find((e=>e.id===l));return i?n.createElement("span",{className:e,title:i.platform},i.platform):n.createElement("span",{className:e},(0,Pe.Z)("Unknown"))},style:{flex:"1 1 150px"}},De=[{key:"viewedAt",ascKey:"viewedAt",descKey:"viewedAt:desc",title:()=>(0,Pe.Z)("Played"),component:function({className:e,playHistoryItem:t}){const{viewedAt:r}=t,l=(0,y.v9)(Se),a=(0,Ne.Z)(1e3*r,`${l} MMM d, yyyy`);return n.createElement("span",{className:e,title:a},a)},style:{flex:"1 1 150px"}}];var He=r(73368),Le=r(75656),Ue=r(97110),Ve=r(55514),Xe=r(81356);const ze=parseInt(Ve.Z.tableRowHeight,10),Ke=(0,Xe.Z)({rowHeight:ze,overscan:20});var Qe=r(7567),qe=r(25516),We=r(3523),$e=r(75130),Je=r(25912);const Ye=(0,v.P1)(Je.Z,(e=>e.playHistory));var _e=r(51547);const Be={tableCell:"QxJfk",activeTableCell:"LPkSW QxJfk",title:"PApjs"};var Ge=Object.defineProperty,et=Object.prototype.hasOwnProperty,tt=Object.getOwnPropertySymbols,rt=Object.prototype.propertyIsEnumerable,nt=(e,t,r)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lt=(e,t)=>{for(var r in t||(t={}))et.call(t,r)&&nt(e,r,t[r]);if(tt)for(var r of tt(t))rt.call(t,r)&&nt(e,r,t[r]);return e};function at(e){var t=e,{className:r=Be.title,cellClassName:l=Be.tableCell,activeCellClassName:a=Be.activeTableCell,style:i,component:o,type:c,isActiveSort:s}=t,u=((e,t)=>{var r={};for(var n in e)et.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&tt)for(var n of tt(e))t.indexOf(n)<0&&rt.call(e,n)&&(r[n]=e[n]);return r})(t,["className","cellClassName","activeCellClassName","style","component","type","isActiveSort"]);return n.createElement("div",{className:s?a:l,style:i},n.createElement(o,lt(lt({},u),{className:r})))}var it=r(33053),ot=r(12359);const ct=n.forwardRef((({style:e,cellIndex:t},r)=>n.createElement("div",{ref:r,className:t%2?"csa_m VFIAw":"VFIAw",style:e},(0,Pe.Z)("Loading..."))));var st=Object.prototype.hasOwnProperty,ut=Object.getOwnPropertySymbols,mt=Object.prototype.propertyIsEnumerable;function pt(e){var t=e,{item:r,activeTableColumns:l}=t,i=((e,t)=>{var r={};for(var n in e)st.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ut)for(var n of ut(e))t.indexOf(n)<0&&mt.call(e,n)&&(r[n]=e[n]);return r})(t,["item","activeTableColumns"]);const[o]=(0,a.c9)(),c=(0,it.Z)(i);let s;if(null==r?void 0:r.key){const e=l.some((e=>"title"===e.key)),t=r.type===Ce.IK?r.parentKey:r.key;s=e?(0,ot.Z)(o,{isLibraryProvider:!0},t):void 0}return r?n.createElement("div",{ref:c.cellRef,className:i.cellIndex%2?"up4nP mAt1Q":"mAt1Q",style:c.style},n.createElement(_e.Z,{"aria-label":r.title,className:"EC_NS IYkbp",isDisabled:!s,to:s},l.map((({style:e,component:t},l)=>n.createElement(at,{key:l,component:t,playHistoryItem:r,style:e}))))):n.createElement(ct,{ref:c.cellRef,cellIndex:i.cellIndex,style:c.style})}var ft=Object.defineProperty,dt=Object.prototype.hasOwnProperty,yt=Object.getOwnPropertySymbols,vt=Object.prototype.propertyIsEnumerable,bt=(e,t,r)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gt=(e,t)=>{for(var r in t||(t={}))dt.call(t,r)&&bt(e,r,t[r]);if(yt)for(var r of yt(t))vt.call(t,r)&&bt(e,r,t[r]);return e};function ht({activeTableColumns:e,activeFilters:t,activeSort:r}){const l=(0,y.I0)(),[i]=(0,a.c9)(),o=(0,y.v9)(Ye),c=(0,y.v9)((0,ke.Z)(i.machineIdentifier)),{items:s,totalSize:u,isPopulated:m,error:p}=o,{isPopulated:f,error:d}=c||{},v=(0,n.useCallback)((e=>{l(Oe.Z.actions.fetchRangeRequested(gt(gt({},e),{server:i,filters:t,sort:r})))}),[l,i,t,r]),b=(0,n.useMemo)((()=>t=>n.createElement(pt,gt(gt({},t),{activeTableColumns:e}))),[e]);return m&&u&&(f||d)?n.createElement(We.Z,{cellComponentFactory:b,className:"yHSCf ecHmp sWZ6m",items:s,layout:Ke,totalSize:u,onPageRequest:v}):m&&!u?n.createElement(Qe.Z,{description:(0,Pe.Z)("Snuggle up on the couch and play something!"),title:(0,Pe.Z)("Nothing to see here")}):p?n.createElement(qe.Z,null):n.createElement(Qe.Z,null,n.createElement($e.Z,null))}var Zt=r(25542),Ot=Object.defineProperty,Et=Object.prototype.hasOwnProperty,Pt=Object.getOwnPropertySymbols,It=Object.prototype.propertyIsEnumerable,wt=(e,t,r)=>t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function kt(e){return n.createElement(Zt.Z,((e,t)=>{for(var r in t||(t={}))Et.call(t,r)&&wt(e,r,t[r]);if(Pt)for(var r of Pt(t))It.call(t,r)&&wt(e,r,t[r]);return e})({},e))}kt.defaultProps={className:"Vk7ZX"};const Ct=kt;var jt=r(91764),St=r(11204),Nt=Object.defineProperty,xt=Object.prototype.hasOwnProperty,Tt=Object.getOwnPropertySymbols,At=Object.prototype.propertyIsEnumerable,Ft=(e,t,r)=>t in e?Nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Mt(e){return n.createElement("div",((e,t)=>{for(var r in t||(t={}))xt.call(t,r)&&Ft(e,r,t[r]);if(Tt)for(var r of Tt(t))At.call(t,r)&&Ft(e,r,t[r]);return e})({},e))}Mt.defaultProps={className:"X5jaX"};const Rt=Mt;var Dt=r(26423),Ht=Object.defineProperty,Lt=Object.prototype.hasOwnProperty,Ut=Object.getOwnPropertySymbols,Vt=Object.prototype.propertyIsEnumerable,Xt=(e,t,r)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zt=(e,t)=>{for(var r in t||(t={}))Lt.call(t,r)&&Xt(e,r,t[r]);if(Ut)for(var r of Ut(t))Vt.call(t,r)&&Xt(e,r,t[r]);return e};function Kt(e,t,r){if(null==r)return e.filter((e=>e.key!==t));const n=[...e];let l=n.length;for(;l-- >0;){const e=n[l],a=e.key,i=e.value;if(t===a&&r===i)n.splice(l,1);else if(t===a&&Array.isArray(i)){const t=i.indexOf(r);t>-1&&(i.splice(t,1),1===i.length?n.splice(l,1,zt(zt({},e),{value:i[0]})):i.length||n.splice(l,1))}}return n}var Qt=Object.defineProperty,qt=Object.prototype.hasOwnProperty,Wt=Object.getOwnPropertySymbols,$t=Object.prototype.propertyIsEnumerable,Jt=(e,t,r)=>t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Yt(e,t,r){const n=[...e],l=n.findIndex((e=>e.key===t)),a=-1===l?0:l,i=((e,t)=>{for(var r in t||(t={}))qt.call(t,r)&&Jt(e,r,t[r]);if(Wt)for(var r of Wt(t))$t.call(t,r)&&Jt(e,r,t[r]);return e})({key:t},r);return-1===l?n.push(i):n.splice(a,1,i),n}var _t=r(72955),Bt=r(86233);let Gt,er;function tr(e,t){if(Q().isEmpty(e))return;if(e===Gt)return er;const r=e.map((({key:e,value:r,operator:n="="})=>{let l;l=t?Array.isArray(r)?r.join(","):r:Array.isArray(r)?r.map(encodeURIComponent).join(","):encodeURIComponent(r);const a=n.lastIndexOf(te),i=n.substr(0,a),o=n.substr(a+1,n.lastIndexOf(te));return encodeURIComponent(e)+encodeURIComponent(i)+te+encodeURIComponent(o)+l}),[]);return Gt=e,er=r.join("&"),er}var rr=Object.defineProperty,nr=Object.prototype.hasOwnProperty,lr=Object.getOwnPropertySymbols,ar=Object.prototype.propertyIsEnumerable,ir=(e,t,r)=>t in e?rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,or=(e,t)=>{for(var r in t||(t={}))nr.call(t,r)&&ir(e,r,t[r]);if(lr)for(var r of lr(t))ar.call(t,r)&&ir(e,r,t[r]);return e};let cr,sr;function ur(e,t=window.location.hash){const r=function(e){if(cr===e)return sr;const t=e.split("?"),r=t.length>1?t[1]:void 0,n=r?U.Z.parseParams(r):{};return cr=e,sr={url:t[0],params:n},sr}(t);return U.Z.join(r.url,or(or({},r.params),{filters:tr(e.filters),activeTimePeriod:e.activeTimePeriod,sort:e.sort}))}var mr=r(32516),pr=r(21581),fr=r(43559),dr=r(61775);function yr({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[l]=(0,a.c9)(),i=(0,dr.Z)(),o=(0,Bt.Z)(),c=(0,n.useMemo)((()=>({key:"",title:(0,Pe.Z)("All Users")})),[]),s=(0,y.v9)((0,_t.Z)(l.machineIdentifier)),u=(0,n.useMemo)((()=>null==s?void 0:s.reduce(((e,t)=>(e.push({key:String(t.id),title:t.name}),e)),[c])),[s,c]),m=(0,n.useMemo)((()=>{const t=e.find((e=>"accountID"===e.key));return t?u.find((e=>e.key===t.value)):c}),[e,u,c]),p=(0,n.useCallback)((n=>{let l;l=n?Yt(e,xe.F.AccountID,{value:String(n),type:$}):Kt(e,xe.F.AccountID),window.location.hash=ur({filters:l,activeTimePeriod:t,sort:r})}),[e,t,r]);return m&&(null==u?void 0:u.length)?n.createElement(n.Fragment,null,n.createElement(jt.Z,{hasMenu:!0,id:i,isMenuOpen:o.isOpen,onPress:o.onToggle},m.title),n.createElement(mr.Z,{isOpen:o.isOpen,target:i,onMenuClose:o.onClose},u.map((e=>n.createElement(pr.Z,{key:e.key,isSelected:m.key===e.key,value:e.key,onSelect:(0,fr.Z)(p,o.onClose)},e.title))))):null}var vr=r(19449),br=r(97358);const gr=(0,vr.Z)((function(e,t){return(0,v.P1)((0,br.Z)(e,t),(e=>e.filter((e=>{const t=e.type?Ce.nW(e.type):null;return t&&t.typeString!==Ce.zg}))))}));function hr({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[l,i]=(0,a.c9)(),o=(0,dr.Z)(),c=(0,Bt.Z)(),s=(0,y.v9)(gr(l.machineIdentifier,i.identifier)),u=(0,n.useMemo)((()=>({key:"all",title:(0,Pe.Z)("All Libraries")})),[]),m=(0,n.useMemo)((()=>s.reduce(((e,t)=>(e.push({key:t.id,title:t.title}),e)),[u])),[s,u]),p=(0,n.useMemo)((()=>{const t=e.find((e=>"librarySectionID"===e.key));return t&&m.length?m.find((e=>String(e.key)===t.value)):u}),[e,m,u]),f=(0,n.useCallback)((n=>{let l;l="all"!==n?Yt(e,xe.F.LibrarySectionID,{value:n,type:$}):Kt(e,xe.F.LibrarySectionID),window.location.hash=ur({filters:l,activeTimePeriod:t,sort:r})}),[e,t,r]);return p&&s.length?n.createElement(n.Fragment,null,n.createElement(jt.Z,{hasMenu:!0,id:o,isMenuOpen:c.isOpen,onPress:c.onToggle},p.title),n.createElement(mr.Z,{isOpen:c.isOpen,target:o,onMenuClose:c.onClose},m.map((e=>n.createElement(pr.Z,{key:e.key,isSelected:p.key===e.key,value:e.key,onSelect:(0,fr.Z)(f,c.onClose)},e.title))))):null}var Zr=r(92775);function Or(){const[e]=(0,a.c9)(),t=(0,dr.Z)(),r=(0,Bt.Z)(),l=(0,y.v9)(Zr.Z),i=(0,n.useMemo)((()=>l.reduce(((e,t)=>(t.isFullOwnedServer&&t.isConnected&&e.push({key:t.machineIdentifier,title:t.friendlyName}),e)),[])),[l]),o=(0,n.useMemo)((()=>i.find((t=>t.key===e.machineIdentifier))),[e,i]),c=(0,n.useCallback)((e=>{window.location.hash=(0,Dt.Z)(e)}),[]);return o?n.createElement(n.Fragment,null,n.createElement(jt.Z,{hasMenu:!0,id:t,isMenuOpen:r.isOpen,onPress:r.onToggle},o.title),n.createElement(mr.Z,{isOpen:r.isOpen,target:t,onMenuClose:r.onClose},i.map((e=>n.createElement(pr.Z,{key:e.key,isSelected:o.key===e.key,value:e.key,onSelect:(0,fr.Z)(c,r.onClose)},e.title))))):null}function Er({activeFilters:e,activeTimePeriod:t,activeSort:r}){const l=(0,dr.Z)(),a=(0,Bt.Z)(),i=[Ue.XH.Week,Ue.XH.Month,Ue.XH.NinetyDays,Ue.XH.Year,Ue.XH.AllTime],o=(0,n.useCallback)((t=>{const n=Yt(e,xe.F.ViewedAt,{value:String((0,Ue.xP)(t)),type:$});window.location.hash=ur({filters:n,activeTimePeriod:t,sort:r})}),[e,r]);return n.createElement(n.Fragment,null,n.createElement(jt.Z,{hasMenu:!0,id:l,isMenuOpen:a.isOpen,onPress:a.onToggle},(0,Ue.dZ)(t)),n.createElement(mr.Z,{isOpen:a.isOpen,target:l,onMenuClose:a.onClose},i.map((e=>n.createElement(pr.Z,{key:e,isSelected:t===e,value:e,onSelect:(0,fr.Z)(o,a.onClose)},(0,Ue.dZ)(e))))))}const Pr=(0,v.P1)(Ye,(e=>e.totalSize));function Ir({activeFilters:e,activeFilterTitle:t,activeTimePeriod:r,activeSort:l}){const[i]=(0,a.c9)(),o=(0,y.v9)(Pr),c=!Ee(e,xe.F.MetadataItemID);return n.createElement(Rt,null,n.createElement(St.Z,null,n.createElement(jt.Z,{to:(0,Dt.Z)(i.machineIdentifier)},(0,Pe.Z)("Play History")),t?n.createElement(jt.Z,null,t):null,c?n.createElement(Or,null):null,c?n.createElement(n.Fragment,null,n.createElement(hr,{activeFilters:e,activeSort:l,activeTimePeriod:r}),n.createElement(yr,{activeFilters:e,activeSort:l,activeTimePeriod:r}),n.createElement(Er,{activeFilters:e,activeSort:l,activeTimePeriod:r})):null,n.createElement(Ct,null,o)))}var wr=r(65711);const kr=(0,n.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",height:l="1em",testID:a},i){const o={width:"auto",height:`max(${"number"==typeof l?`${l}px`:l}, 1rem)`};return n.createElement("svg",{ref:i,"aria-hidden":!t,"aria-label":t,className:(0,wr.J)({align:e,color:r}),"data-testid":a,fill:"currentColor",height:48,style:o,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M24 4.5C24.8284 4.5 25.5 5.17157 25.5 6V37.3787L29.4393 33.4393C30.0251 32.8536 30.9749 32.8536 31.5607 33.4393C32.1464 34.0251 32.1464 34.9749 31.5607 35.5607L25.0607 42.0607C24.4749 42.6464 23.5251 42.6464 22.9393 42.0607L16.4393 35.5607C15.8536 34.9749 15.8536 34.0251 16.4393 33.4393C17.0251 32.8536 17.9749 32.8536 18.5607 33.4393L22.5 37.3787V6C22.5 5.17157 23.1716 4.5 24 4.5Z",fill:"currentColor",fillRule:"evenodd"}))})),Cr=(0,n.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",height:l="1em",testID:a},i){const o={width:"auto",height:`max(${"number"==typeof l?`${l}px`:l}, 1rem)`};return n.createElement("svg",{ref:i,"aria-hidden":!t,"aria-label":t,className:(0,wr.J)({align:e,color:r}),"data-testid":a,fill:"currentColor",height:48,style:o,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{clipRule:"evenodd",d:"M24 42.5C24.8284 42.5 25.5 41.8284 25.5 41V9.62132L29.4393 13.5607C30.0251 14.1464 30.9749 14.1464 31.5607 13.5607C32.1464 12.9749 32.1464 12.0251 31.5607 11.4393L25.0607 4.93934C24.4749 4.35355 23.5251 4.35355 22.9393 4.93934L16.4393 11.4393C15.8536 12.0251 15.8536 12.9749 16.4393 13.5607C17.0251 14.1464 17.9749 14.1464 18.5607 13.5607L22.5 9.62132V41C22.5 41.8284 23.1716 42.5 24 42.5Z",fill:"currentColor",fillRule:"evenodd"}))}));function jr({isAscending:e=!0}){const t=e?kr:Cr;return n.createElement("div",{className:"Qyz0d"},n.createElement(t,{"aria-label":e?(0,Pe.Z)("Ascending"):(0,Pe.Z)("Descending")}))}const Sr={tableHeader:"s6Lne"};var Nr=Object.defineProperty,xr=Object.prototype.hasOwnProperty,Tr=Object.getOwnPropertySymbols,Ar=Object.prototype.propertyIsEnumerable,Fr=(e,t,r)=>t in e?Nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mr=(e,t)=>{for(var r in t||(t={}))xr.call(t,r)&&Fr(e,r,t[r]);if(Tr)for(var r of Tr(t))Ar.call(t,r)&&Fr(e,r,t[r]);return e};function Rr(e){var t=e,{className:r=Sr.tableHeader}=t,l=((e,t)=>{var r={};for(var n in e)xr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Tr)for(var n of Tr(e))t.indexOf(n)<0&&Ar.call(e,n)&&(r[n]=e[n]);return r})(t,["className"]);return n.createElement("div",Mr(Mr({},l),{className:r}))}const Dr={tableHeaderCell:"QiY7l QxJfk",activeTableHeaderCell:"NovjU QiY7l QxJfk"};var Hr=Object.defineProperty,Lr=Object.prototype.hasOwnProperty,Ur=Object.getOwnPropertySymbols,Vr=Object.prototype.propertyIsEnumerable,Xr=(e,t,r)=>t in e?Hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zr=(e,t)=>{for(var r in t||(t={}))Lr.call(t,r)&&Xr(e,r,t[r]);if(Ur)for(var r of Ur(t))Vr.call(t,r)&&Xr(e,r,t[r]);return e};function Kr(e){var t=e,{className:r=Dr.tableHeaderCell,activeClassName:l=Dr.activeTableHeaderCell,children:a,isActive:i=!1}=t,o=((e,t)=>{var r={};for(var n in e)Lr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ur)for(var n of Ur(e))t.indexOf(n)<0&&Vr.call(e,n)&&(r[n]=e[n]);return r})(t,["className","activeClassName","children","isActive"]);const c=i?l:r;return n.createElement("span",zr(zr({},o),{className:c}),a)}const Qr={tableHeaderLink:"Dqwo6 IYkbp"};var qr=Object.defineProperty,Wr=Object.prototype.hasOwnProperty,$r=Object.getOwnPropertySymbols,Jr=Object.prototype.propertyIsEnumerable,Yr=(e,t,r)=>t in e?qr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_r=(e,t)=>{for(var r in t||(t={}))Wr.call(t,r)&&Yr(e,r,t[r]);if($r)for(var r of $r(t))Jr.call(t,r)&&Yr(e,r,t[r]);return e};function Br(e){var t=e,{className:r=Qr.tableHeaderLink,children:l}=t,a=((e,t)=>{var r={};for(var n in e)Wr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&$r)for(var n of $r(e))t.indexOf(n)<0&&Jr.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children"]);return n.createElement(_e.Z,_r(_r({},a),{className:r}),l)}const Gr={tableHeaderTitle:"tLpNh"};var en=Object.defineProperty,tn=Object.prototype.hasOwnProperty,rn=Object.getOwnPropertySymbols,nn=Object.prototype.propertyIsEnumerable,ln=(e,t,r)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,an=(e,t)=>{for(var r in t||(t={}))tn.call(t,r)&&ln(e,r,t[r]);if(rn)for(var r of rn(t))nn.call(t,r)&&ln(e,r,t[r]);return e};function on(e){var t=e,{className:r=Gr.tableHeaderTitle,children:l}=t,a=((e,t)=>{var r={};for(var n in e)tn.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&rn)for(var n of rn(e))t.indexOf(n)<0&&nn.call(e,n)&&(r[n]=e[n]);return r})(t,["className","children"]);return n.createElement("span",an(an({},a),{className:r}),l)}function cn({activeTableColumns:e,activeFilters:t,activeTimePeriod:r,activeSort:l}){return n.createElement(Rr,null,e.map((({style:e,title:a,ascKey:i,descKey:o,key:c})=>{if(!i)return n.createElement("div",{key:c,className:"IvN7A",style:e},n.createElement(Kr,null,n.createElement(on,null,a())));const s=l===i||l===o,u=l===i;return n.createElement(Br,{key:c,style:e,to:ur({filters:t,activeTimePeriod:r,sort:u?o:i})},n.createElement(Kr,{isActive:s},n.createElement(on,null,a()),s?n.createElement(jr,{isAscending:!u}):null))})))}function sn(){var e;const t=(0,y.I0)(),[r]=(0,a.c9)(),l=(0,i.Z)(),o=function(e){if(!e)return[];const t=decodeURIComponent(e).match(ne);return t?t.reduce(((e,t)=>{const r=t.match(le),[,n,l,a]=r||[];let i=a?Q().uniq(a.split(",")):"";return 1===i.length&&(i=i[0]),function(e,t,r){const n=[...e];if(r.type===W){const e=Q().findIndex(n,(e=>e.key===t)),l=-1===e?0:e,a=ee({key:t},r);-1===e?n.push(a):n.splice(l,1,a)}else Q().findWhere(n,{key:t,value:r.value})||n.push(ee({key:t},r));return n}(e,n,{value:i,type:ae[n]?W:$,operator:l})}),[]):[]}(l.filters),c=(0,s.Z)(l.filterTitle),u=null!=(e=(0,He.su)(Ue.XH).find((e=>e===(0,s.Z)(l.activeTimePeriod))))?e:Ue.XH.AllTime,m=l.sort?(0,s.Z)(l.sort):"viewedAt:desc",p=(0,Le.Z)(l.isParentType),f=function(e,t){let r=[Me,Re,...De];return!t&&Ee(e,xe.F.MetadataItemID)||(r=[Fe,...r]),Ee(e,xe.F.LibrarySectionID)||Ee(e,xe.F.MetadataItemID)||(r=[Ae,...r]),Ee(e,xe.F.AccountID)||(r=[Te,...r]),r}(o,p);return(0,se.Z)(),(0,n.useEffect)((()=>{t(ce.Z.actions.populateRequested({server:r})),t(oe.Z.actions.populateRequested({server:r}))}),[t,r]),(0,n.useEffect)((()=>((0,ie.c9)((()=>{t(Oe.Z.actions.fetchRangeRequested({server:r,filters:o,sort:m,startIndex:0,size:100}))})),()=>{t(Oe.Z.actions.reset())})),[o,m,t,r]),n.createElement(Ze,{scrollDirection:ue.I.None},n.createElement(Ir,{activeFilterTitle:c,activeFilters:o,activeSort:m,activeTimePeriod:u}),n.createElement(cn,{activeFilters:o,activeSort:m,activeTableColumns:f,activeTimePeriod:u}),n.createElement(ht,{activeFilters:o,activeSort:m,activeTableColumns:f}))}function un(){const{machineIdentifier:e,providerIdentifier:t}=(0,c.Z)(),r=(0,i.Z)();return n.createElement(a.ZP,{machineIdentifier:e,providerIdentifier:t},n.createElement(M,{machineIdentifier:e,providerIdentifier:t},n.createElement(o.ZP,{metricsContext:(0,s.Z)(r.context),metricsPage:l.mw},n.createElement(sn,null))))}}}]);